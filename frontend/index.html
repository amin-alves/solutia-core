<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOLUTI - Login</title>
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<div class="login-container">

    <!-- Logo e nome do √≥rg√£o din√¢micos via tenant.js -->
    <img id="orgao-logo" class="logo" alt="Logo do √≥rg√£o">
    <h2 id="orgao-nome"></h2>
    <p>Intranet do √ìrg√£o</p>

    <input type="email" id="usuario" placeholder="Email">

    <div class="password-wrapper">
        <input type="password" id="senha" placeholder="Senha">
        <span class="toggle-password" onclick="toggleSenha()">üëÅ</span>
    </div>

    <button onclick="login()">Entrar</button>

    <div class="footer">
        Powered by Soluti ¬© 2026
    </div>

</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/tenant.js"></script>
<script src="js/supabase.js"></script>

<script>
async function login() {
    const email = document.getElementById("usuario").value;
    const senha = document.getElementById("senha").value;

    if (!email || !senha) {
        alert("Preencha todos os campos");
        return;
    }

    try {
        const { data, error } = await supabase.auth.signInWithPassword({ email, password: senha });
        if (error) throw error;

        localStorage.setItem("usuarioLogado", JSON.stringify(data.user));
        window.location.href = "dashboard.html";

    } catch (err) {
        alert("Erro no login: " + err.message);
    }
}

function toggleSenha() {
    const campo = document.getElementById("senha");
    campo.type = campo.type === "password" ? "text" : "password";
}
</script>

</body>
</html>





